import{s as He,f as g,l as j,a as y,g as C,h as D,m as N,d as a,c as S,j as F,i as O,v as r,n as M,T as Ue,O as he,a2 as Xe,z as Ve,P as Ie,R as we,y as de,a1 as De,K as Ae}from"./scheduler.e2128b0a.js";import{S as ze,i as Ke,b as Le,d as Fe,m as Me,a as $,g as We,t as se,c as Ge,e as qe}from"./index.67dfe82c.js";import{e as re}from"./each.972e7fc1.js";import{C as Je,c as Qe}from"./copy.fd988812.js";import{e as Ye}from"./alertsStore.917fee82.js";import{E as Ze}from"./ErrorAlert.0e1f7f7a.js";import{w as xe}from"./walletStore.df8a4074.js";import{l as $e}from"./index.027ae11e.js";function Oe(o,e,n){const f=o.slice();return f[17]=e[n],f[19]=n,f}function je(o,e,n){const f=o.slice();return f[20]=e[n][0],f[21]=e[n][1],f}function Ne(o){let e,n="Transaction Details",f,E,h,_,v=o[8].networkPassphrase+"",i,t,b,u,m,s=o[8].source+"",c,d,R,P,w,T=o[8].sequence+"",p,H,q,W,Z,x=o[8].fee+"",ee,te,G,A,be="Operations",le,V,ne,U,J,oe,fe,z,K,ie,X,ce,ve,L="memo"in o[8]&&Re(o),Q=re(o[8].operations),I=[];for(let l=0;l<Q.length;l+=1)I[l]=Be(Oe(o,Q,l));return K=new Je({props:{size:"16"}}),{c(){e=g("h2"),e.textContent=n,f=y(),E=g("p"),h=j("Network: "),_=g("code"),i=j(v),t=y(),b=g("p"),u=j("Source: "),m=g("code"),c=j(s),d=y(),R=g("p"),P=j("Sequence Number: "),w=g("code"),p=j(T),H=y(),q=g("p"),W=j("Fee: "),Z=g("code"),ee=j(x),te=y(),L&&L.c(),G=y(),A=g("h2"),A.textContent=be,le=y(),V=g("ol");for(let l=0;l<I.length;l+=1)I[l].c();ne=y(),U=g("div"),J=g("pre"),oe=j(o[5]),fe=y(),z=g("button"),Le(K.$$.fragment),this.h()},l(l){e=C(l,"H2",{"data-svelte-h":!0}),he(e)!=="svelte-sk2td0"&&(e.textContent=n),f=S(l),E=C(l,"P",{});var k=D(E);h=N(k,"Network: "),_=C(k,"CODE",{});var B=D(_);i=N(B,v),B.forEach(a),k.forEach(a),t=S(l),b=C(l,"P",{});var Y=D(b);u=N(Y,"Source: "),m=C(Y,"CODE",{});var pe=D(m);c=N(pe,s),pe.forEach(a),Y.forEach(a),d=S(l),R=C(l,"P",{});var ue=D(R);P=N(ue,"Sequence Number: "),w=C(ue,"CODE",{});var Ee=D(w);p=N(Ee,T),Ee.forEach(a),ue.forEach(a),H=S(l),q=C(l,"P",{});var me=D(q);W=N(me,"Fee: "),Z=C(me,"CODE",{});var ke=D(Z);ee=N(ke,x),ke.forEach(a),me.forEach(a),te=S(l),L&&L.l(l),G=S(l),A=C(l,"H2",{"data-svelte-h":!0}),he(A)!=="svelte-1ok1cys"&&(A.textContent=be),le=S(l),V=C(l,"OL",{start:!0});var ge=D(V);for(let _e=0;_e<I.length;_e+=1)I[_e].l(ge);ge.forEach(a),ne=S(l),U=C(l,"DIV",{class:!0});var ae=D(U);J=C(ae,"PRE",{class:!0});var Ce=D(J);oe=N(Ce,o[5]),Ce.forEach(a),fe=S(ae),z=C(ae,"BUTTON",{class:!0});var Pe=D(z);Fe(K.$$.fragment,Pe),Pe.forEach(a),ae.forEach(a),this.h()},h(){F(V,"start","0"),F(J,"class","whitespace-normal break-words"),F(z,"class","btn-ghost btn-square btn-sm btn absolute bottom-1 right-1"),F(U,"class","relative")},m(l,k){O(l,e,k),O(l,f,k),O(l,E,k),r(E,h),r(E,_),r(_,i),O(l,t,k),O(l,b,k),r(b,u),r(b,m),r(m,c),O(l,d,k),O(l,R,k),r(R,P),r(R,w),r(w,p),O(l,H,k),O(l,q,k),r(q,W),r(q,Z),r(Z,ee),O(l,te,k),L&&L.m(l,k),O(l,G,k),O(l,A,k),O(l,le,k),O(l,V,k);for(let B=0;B<I.length;B+=1)I[B]&&I[B].m(V,null);O(l,ne,k),O(l,U,k),r(U,J),r(J,oe),r(U,fe),r(U,z),Me(K,z,null),X=!0,ce||(ve=Xe(ie=Qe.call(null,z,o[5])),ce=!0)},p(l,k){if((!X||k&256)&&v!==(v=l[8].networkPassphrase+"")&&M(i,v),(!X||k&256)&&s!==(s=l[8].source+"")&&M(c,s),(!X||k&256)&&T!==(T=l[8].sequence+"")&&M(p,T),(!X||k&256)&&x!==(x=l[8].fee+"")&&M(ee,x),"memo"in l[8]?L?L.p(l,k):(L=Re(l),L.c(),L.m(G.parentNode,G)):L&&(L.d(1),L=null),k&256){Q=re(l[8].operations);let B;for(B=0;B<Q.length;B+=1){const Y=Oe(l,Q,B);I[B]?I[B].p(Y,k):(I[B]=Be(Y),I[B].c(),I[B].m(V,null))}for(;B<I.length;B+=1)I[B].d(1);I.length=Q.length}(!X||k&32)&&M(oe,l[5]),ie&&Ve(ie.update)&&k&32&&ie.update.call(null,l[5])},i(l){X||($(K.$$.fragment,l),X=!0)},o(l){se(K.$$.fragment,l),X=!1},d(l){l&&(a(e),a(f),a(E),a(t),a(b),a(d),a(R),a(H),a(q),a(te),a(G),a(A),a(le),a(V),a(ne),a(U)),L&&L.d(l),Ie(I,l),qe(K),ce=!1,ve()}}}function Re(o){var t,b,u,m;let e,n,f=o[8].memo.type+"",E,h,_,v=(o[8].memo.type==="text"?(b=(t=o[8].memo)==null?void 0:t.value)==null?void 0:b.toString("utf-8"):o[8].memo.type==="hash"?(m=(u=o[8].memo)==null?void 0:u.value)==null?void 0:m.toString("base64"):o[8].memo.value)+"",i;return{c(){e=g("p"),n=j("Memo ("),E=j(f),h=j(`):
                `),_=g("code"),i=j(v)},l(s){e=C(s,"P",{});var c=D(e);n=N(c,"Memo ("),E=N(c,f),h=N(c,`):
                `),_=C(c,"CODE",{});var d=D(_);i=N(d,v),d.forEach(a),c.forEach(a)},m(s,c){O(s,e,c),r(e,n),r(e,E),r(e,h),r(e,_),r(_,i)},p(s,c){var d,R,P,w;c&256&&f!==(f=s[8].memo.type+"")&&M(E,f),c&256&&v!==(v=(s[8].memo.type==="text"?(R=(d=s[8].memo)==null?void 0:d.value)==null?void 0:R.toString("utf-8"):s[8].memo.type==="hash"?(w=(P=s[8].memo)==null?void 0:P.value)==null?void 0:w.toString("base64"):s[8].memo.value)+"")&&M(i,v)},d(s){s&&a(e)}}}function Te(o){let e,n=o[20]+"",f,E,h,_=o[21]+"",v;return{c(){e=g("li"),f=j(n),E=j(": "),h=g("code"),v=j(_)},l(i){e=C(i,"LI",{});var t=D(e);f=N(t,n),E=N(t,": "),h=C(t,"CODE",{});var b=D(h);v=N(b,_),b.forEach(a),t.forEach(a)},m(i,t){O(i,e,t),r(e,f),r(e,E),r(e,h),r(h,v)},p(i,t){t&256&&n!==(n=i[20]+"")&&M(f,n),t&256&&_!==(_=i[21]+"")&&M(v,_)},d(i){i&&a(e)}}}function Be(o){let e,n,f,E,h,_,v=re(Object.entries(o[17])),i=[];for(let t=0;t<v.length;t+=1)i[t]=Te(je(o,v,t));return{c(){e=g("li"),n=j("Operation "),f=j(o[19]),E=y(),h=g("ul");for(let t=0;t<i.length;t+=1)i[t].c();_=y()},l(t){e=C(t,"LI",{});var b=D(e);n=N(b,"Operation "),f=N(b,o[19]),b.forEach(a),E=S(t),h=C(t,"UL",{});var u=D(h);for(let m=0;m<i.length;m+=1)i[m].l(u);_=S(u),u.forEach(a)},m(t,b){O(t,e,b),r(e,n),r(e,f),O(t,E,b),O(t,h,b);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(h,null);r(h,_)},p(t,b){if(b&256){v=re(Object.entries(t[17]));let u;for(u=0;u<v.length;u+=1){const m=je(t,v,u);i[u]?i[u].p(m,b):(i[u]=Te(m),i[u].c(),i[u].m(h,_))}for(;u<i.length;u+=1)i[u].d(1);i.length=v.length}},d(t){t&&(a(e),a(E),a(h)),Ie(i,t)}}}function ye(o){let e,n,f,E='<span class="label-text">Confirm Pincode</span>',h,_,v,i,t,b,u,m,s,c,d,R,P=o[6]&&Se();return{c(){e=g("form"),n=g("div"),f=g("label"),f.innerHTML=E,h=y(),_=g("input"),v=y(),i=g("div"),t=g("button"),P&&P.c(),b=y(),u=j(o[2]),m=y(),s=g("button"),c=j(o[3]),this.h()},l(w){e=C(w,"FORM",{});var T=D(e);n=C(T,"DIV",{class:!0});var p=D(n);f=C(p,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),he(f)!=="svelte-ahbjmx"&&(f.innerHTML=E),h=S(p),_=C(p,"INPUT",{type:!0,id:!0,class:!0}),p.forEach(a),v=S(T),i=C(T,"DIV",{class:!0});var H=D(i);t=C(H,"BUTTON",{class:!0});var q=D(t);P&&P.l(q),b=S(q),u=N(q,o[2]),q.forEach(a),m=S(H),s=C(H,"BUTTON",{class:!0});var W=D(s);c=N(W,o[3]),W.forEach(a),H.forEach(a),T.forEach(a),this.h()},h(){F(f,"class","label"),F(f,"for","pincode"),F(_,"type","password"),F(_,"id","pincode"),F(_,"class","input-bordered input"),F(n,"class","form-control"),F(t,"class","btn-success btn"),t.disabled=o[6],F(s,"class","btn-error btn"),s.disabled=o[6],F(i,"class","my-6 flex justify-end gap-3")},m(w,T){O(w,e,T),r(e,n),r(n,f),r(n,h),r(n,_),we(_,o[7]),r(e,v),r(e,i),r(i,t),P&&P.m(t,null),r(t,b),r(t,u),r(i,m),r(i,s),r(s,c),d||(R=[de(_,"input",o[15]),de(t,"click",De(o[9])),de(s,"click",De(o[10]))],d=!0)},p(w,T){T&128&&_.value!==w[7]&&we(_,w[7]),w[6]?P||(P=Se(),P.c(),P.m(t,b)):P&&(P.d(1),P=null),T&4&&M(u,w[2]),T&64&&(t.disabled=w[6]),T&8&&M(c,w[3]),T&64&&(s.disabled=w[6])},d(w){w&&a(e),P&&P.d(),d=!1,Ae(R)}}}function Se(o){let e;return{c(){e=g("span"),this.h()},l(n){e=C(n,"SPAN",{class:!0}),D(e).forEach(a),this.h()},h(){F(e,"class","loading loading-spinner loading-sm")},m(n,f){O(n,e,f)},d(n){n&&a(e)}}}function et(o){let e,n,f,E,h,_,v,i,t,b,u,m=o[8]&&Ne(o);t=new Ze({});let s=o[4]&&ye(o);return{c(){e=g("div"),n=g("h1"),f=j(o[0]),E=y(),h=g("p"),_=j(o[1]),v=y(),m&&m.c(),i=y(),Le(t.$$.fragment),b=y(),s&&s.c(),this.h()},l(c){e=C(c,"DIV",{class:!0});var d=D(e);n=C(d,"H1",{});var R=D(n);f=N(R,o[0]),R.forEach(a),E=S(d),h=C(d,"P",{});var P=D(h);_=N(P,o[1]),P.forEach(a),v=S(d),m&&m.l(d),i=S(d),Fe(t.$$.fragment,d),b=S(d),s&&s.l(d),d.forEach(a),this.h()},h(){F(e,"class","prose p-3")},m(c,d){O(c,e,d),r(e,n),r(n,f),r(e,E),r(e,h),r(h,_),r(e,v),m&&m.m(e,null),r(e,i),Me(t,e,null),r(e,b),s&&s.m(e,null),u=!0},p(c,[d]){(!u||d&1)&&M(f,c[0]),(!u||d&2)&&M(_,c[1]),c[8]?m?(m.p(c,d),d&256&&$(m,1)):(m=Ne(c),m.c(),$(m,1),m.m(e,i)):m&&(We(),se(m,1,1,()=>{m=null}),Ge()),c[4]?s?s.p(c,d):(s=ye(c),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(c){u||($(m),$(t.$$.fragment,c),u=!0)},o(c){se(m),se(t.$$.fragment,c),u=!1},d(c){c&&a(e),m&&m.d(),qe(t),s&&s.d()}}}function tt(o,e,n){let f;const{close:E}=Ue("simple-modal");let{onConfirm:h=async()=>{}}=e;const _=async()=>{n(6,P=!0);try{await xe.confirmPincode({pincode:w,firstPincode:R,signup:!!R}),await h(w),E()}catch(p){Ye.set(p.body.message)}n(6,P=!1)};let{onReject:v=()=>{}}=e;const i=()=>{v(),E()};let{title:t="Transaction Preview"}=e,{body:b="Please confirm the transaction below in order to sign and submit it to the network."}=e,{confirmButton:u="Confirm"}=e,{rejectButton:m="Reject"}=e,{hasPincodeForm:s=!0}=e,{transactionXDR:c=""}=e,{transactionNetwork:d=""}=e,{firstPincode:R=""}=e,P=!1,w="";function T(){w=this.value,n(7,w)}return o.$$set=p=>{"onConfirm"in p&&n(11,h=p.onConfirm),"onReject"in p&&n(12,v=p.onReject),"title"in p&&n(0,t=p.title),"body"in p&&n(1,b=p.body),"confirmButton"in p&&n(2,u=p.confirmButton),"rejectButton"in p&&n(3,m=p.rejectButton),"hasPincodeForm"in p&&n(4,s=p.hasPincodeForm),"transactionXDR"in p&&n(5,c=p.transactionXDR),"transactionNetwork"in p&&n(13,d=p.transactionNetwork),"firstPincode"in p&&n(14,R=p.firstPincode)},o.$$.update=()=>{o.$$.dirty&8224&&n(8,f=c?$e.TransactionBuilder.fromXDR(c,d||"Diamante Testnet"):null)},[t,b,u,m,s,c,P,w,f,_,i,h,v,d,R,T]}class ct extends ze{constructor(e){super(),Ke(this,e,tt,et,He,{onConfirm:11,onReject:12,title:0,body:1,confirmButton:2,rejectButton:3,hasPincodeForm:4,transactionXDR:5,transactionNetwork:13,firstPincode:14})}}export{ct as C};
