import{p}from"./index.a31f2cbe.js";import{l as s,e as m}from"./index.027ae11e.js";import{N as l}from"./scheduler.e2128b0a.js";let u;const y=new Uint8Array(16);function g(){if(!u&&(u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(y)}const t=[];for(let e=0;e<256;++e)t.push((e+256).toString(16).slice(1));function U(e,n=0){return(t[e[n+0]]+t[e[n+1]]+t[e[n+2]]+t[e[n+3]]+"-"+t[e[n+4]]+t[e[n+5]]+"-"+t[e[n+6]]+t[e[n+7]]+"-"+t[e[n+8]]+t[e[n+9]]+"-"+t[e[n+10]]+t[e[n+11]]+t[e[n+12]]+t[e[n+13]]+t[e[n+14]]+t[e[n+15]]).toLowerCase()}const x=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),a={randomUUID:x};function v(e,n,d){if(a.randomUUID&&!n&&!e)return a.randomUUID();e=e||{};const i=e.random||(e.rng||g)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,n){d=d||0;for(let r=0;r<16;++r)n[d+r]=i[r];return n}return U(i)}function b(){const{subscribe:e,set:n,update:d}=p("bpa:contactList",[]);return{subscribe:e,empty:()=>n([]),remove:i=>d(r=>r.filter(o=>o.id!==i)),add:i=>d(r=>{if(s.StrKey.isValidEd25519PublicKey(i.address))return[...r,{...i,id:v()}];throw m(400,{message:"invalid public key"})}),favorite:i=>d(r=>{const o=r.findIndex(c=>c.id===i);return o>=0&&(r[o].favorite=!r[o].favorite),r}),lookup:i=>{let r=l(I),o=r.findIndex(c=>c.address===i);return o>=0?r[o].name:!1}}}const I=b();export{I as c};
