import{w as d}from"./scheduler.e2128b0a.js";import{w as b}from"./index.65dbf9f2.js";var f={};function z(e){return e==="local"?localStorage:sessionStorage}function L(e,g,n){var p,m;const l=(p=n==null?void 0:n.serializer)!=null?p:JSON,v=(m=n==null?void 0:n.storage)!=null?m:"local",w=typeof d<"u"&&typeof document<"u",o=w?z(v):null;function u(s,i){o==null||o.setItem(s,l.stringify(i))}if(!f[e]){const s=b(g,t=>{const a=o==null?void 0:o.getItem(e);if(a?t(l.parse(a)):u(e,g),w){const r=c=>{c.key===e&&t(c.newValue?l.parse(c.newValue):null)};return d.addEventListener("storage",r),()=>d.removeEventListener("storage",r)}}),{subscribe:i,set:S}=s;f[e]={set(t){u(e,t),S(t)},update(t){return s.update(a=>{const r=t(a);return u(e,r),r})},subscribe:i}}return f[e]}export{L as p};
