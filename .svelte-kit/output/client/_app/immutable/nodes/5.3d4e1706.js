import{s as wt,f as b,a as D,g as T,O as L,c as $,h as B,d as r,R as Y,j as M,J as At,i as v,v as k,S as ct,y as F,P as Et,K as vt,T as Dt,l as nt,m as at,n as bt,U as $t,x as It}from"../chunks/scheduler.e2128b0a.js";import{S as xt,i as Ht,a as P,c as st,t as R,g as lt,b as Tt,d as yt,m as Ct,e as kt}from"../chunks/index.67dfe82c.js";import{e as ft}from"../chunks/each.972e7fc1.js";import{T as Mt}from"../chunks/Trash2Icon.b0de61a9.js";import{C as Nt}from"../chunks/ConfirmationModal.56c6a33a.js";import{T as Pt}from"../chunks/TruncatedKey.d469d295.js";import{w as Bt}from"../chunks/walletStore.df8a4074.js";import{i as Ot}from"../chunks/navigation.00afe88d.js";import{s as Lt}from"../chunks/horizonQueries.4e1e7f67.js";import{c as jt}from"../chunks/transactions.8078ad3c.js";function dt(n,t,s){const l=n.slice();return l[16]=t[s],l}function et(n){const t=n.slice(),s=`${t[16].asset_code}:${t[16].asset_issuer}`;return t[19]=s,t}function _t(n){let t,s,l,i,m,g;return{c(){t=b("div"),s=b("input"),l=D(),i=b("input"),this.h()},l(a){t=T(a,"DIV",{class:!0});var f=B(t);s=T(f,"INPUT",{type:!0,class:!0,placeholder:!0}),l=$(f),i=T(f,"INPUT",{type:!0,class:!0,placeholder:!0}),f.forEach(r),this.h()},h(){M(s,"type","text"),M(s,"class","input-bordered input join-item grow"),M(s,"placeholder","Asset Code"),M(i,"type","text"),M(i,"class","input-bordered input join-item grow"),M(i,"placeholder","Asset Issuer"),M(t,"class","join my-2 w-full flex-wrap")},m(a,f){v(a,t,f),k(t,s),Y(s,n[1]),k(t,l),k(t,i),Y(i,n[2]),m||(g=[F(s,"input",n[7]),F(i,"input",n[8])],m=!0)},p(a,f){f&2&&s.value!==a[1]&&Y(s,a[1]),f&4&&i.value!==a[2]&&Y(i,a[2])},d(a){a&&r(t),m=!1,vt(g)}}}function Rt(n){let t;return{c(){t=nt("DIAM")},l(s){t=at(s,"DIAM")},m(s,l){v(s,t,l)},p:It,d(s){s&&r(t)}}}function St(n){let t=n[16].asset_code+"",s;return{c(){s=nt(t)},l(l){s=at(l,t)},m(l,i){v(l,s,i)},p(l,i){i&8&&t!==(t=l[16].asset_code+"")&&bt(s,t)},d(l){l&&r(s)}}}function ht(n){let t,s;return t=new Pt({props:{keyText:n[16].asset_issuer}}),{c(){Tt(t.$$.fragment)},l(l){yt(t.$$.fragment,l)},m(l,i){Ct(t,l,i),s=!0},p(l,i){const m={};i&8&&(m.keyText=l[16].asset_issuer),t.$set(m)},i(l){s||(P(t.$$.fragment,l),s=!0)},o(l){R(t.$$.fragment,l),s=!1},d(l){kt(t,l)}}}function mt(n){let t,s,l,i,m;s=new Mt({props:{size:"16"}});function g(){return n[10](n[19])}return{c(){t=b("button"),Tt(s.$$.fragment),this.h()},l(a){t=T(a,"BUTTON",{class:!0});var f=B(t);yt(s.$$.fragment,f),f.forEach(r),this.h()},h(){M(t,"class","btn-error btn-square btn-sm btn")},m(a,f){v(a,t,f),Ct(s,t,null),l=!0,i||(m=F(t,"click",g),i=!0)},p(a,f){n=a},i(a){l||(P(s.$$.fragment,a),l=!0)},o(a){R(s.$$.fragment,a),l=!1},d(a){a&&r(t),kt(s),i=!1,m()}}}function pt(n){let t,s,l,i,m=n[16].balance+"",g,a,f,I,y,O,x;function C(u,c){return"asset_code"in u[16]?St:Rt}let w=C(n),A=w(n),_="asset_issuer"in n[16]&&ht(n),d="asset_code"in n[16]&&mt(et(n));return{c(){t=b("tr"),s=b("th"),A.c(),l=D(),i=b("td"),g=nt(m),a=D(),f=b("td"),_&&_.c(),I=D(),y=b("td"),d&&d.c(),O=D()},l(u){t=T(u,"TR",{});var c=B(t);s=T(c,"TH",{});var N=B(s);A.l(N),N.forEach(r),l=$(c),i=T(c,"TD",{});var H=B(i);g=at(H,m),H.forEach(r),a=$(c),f=T(c,"TD",{});var S=B(f);_&&_.l(S),S.forEach(r),I=$(c),y=T(c,"TD",{});var U=B(y);d&&d.l(U),U.forEach(r),O=$(c),c.forEach(r)},m(u,c){v(u,t,c),k(t,s),A.m(s,null),k(t,l),k(t,i),k(i,g),k(t,a),k(t,f),_&&_.m(f,null),k(t,I),k(t,y),d&&d.m(y,null),k(t,O),x=!0},p(u,c){w===(w=C(u))&&A?A.p(u,c):(A.d(1),A=w(u),A&&(A.c(),A.m(s,null))),(!x||c&8)&&m!==(m=u[16].balance+"")&&bt(g,m),"asset_issuer"in u[16]?_?(_.p(u,c),c&8&&P(_,1)):(_=ht(u),_.c(),P(_,1),_.m(f,null)):_&&(lt(),R(_,1,1,()=>{_=null}),st()),"asset_code"in u[16]?d?(d.p(et(u),c),c&8&&P(d,1)):(d=mt(et(u)),d.c(),P(d,1),d.m(y,null)):d&&(lt(),R(d,1,1,()=>{d=null}),st())},i(u){x||(P(_),P(d),x=!0)},o(u){R(_),R(d),x=!1},d(u){u&&r(t),A.d(),_&&_.d(),d&&d.d()}}}function Ut(n){let t,s="Assets",l,i,m=`The <code>/dashboard/assets</code> page will allow the user to manage the Diam assets their account
    carries trustlines to. On this page, they can select from several pre-suggested or highly ranked
    assets, or they could specify their own asset to trust using an asset code and issuer public key.
    They can also remove trustlines that already exist on their account.`,g,a,f="Add Trusted Assets",I,y,O="Add a trustline on your account, allowing you to hold the specified asset.",x,C,w,A="Custom asset...",_,d,u,c="Add Asset",N,H,S="Existing Balances",U,z,it="View or remove asset trustlines on your DIAM account.",G,q,j,X,ot='<tr><th>Asset</th> <th>Balance</th> <th class="w-xs">Issuer</th> <th>Actions</th></tr>',W,J,Q,Z,rt,E=n[0]==="custom"&&_t(n),K=ft(n[3]),h=[];for(let e=0;e<K.length;e+=1)h[e]=pt(dt(n,K,e));const gt=e=>R(h[e],1,1,()=>{h[e]=null});return{c(){t=b("h1"),t.textContent=s,l=D(),i=b("p"),i.innerHTML=m,g=D(),a=b("h2"),a.textContent=f,I=D(),y=b("p"),y.textContent=O,x=D(),C=b("select"),w=b("option"),w.textContent=A,_=D(),E&&E.c(),d=D(),u=b("button"),u.textContent=c,N=D(),H=b("h2"),H.textContent=S,U=D(),z=b("p"),z.textContent=it,G=D(),q=b("div"),j=b("table"),X=b("thead"),X.innerHTML=ot,W=D(),J=b("tbody");for(let e=0;e<h.length;e+=1)h[e].c();this.h()},l(e){t=T(e,"H1",{"data-svelte-h":!0}),L(t)!=="svelte-ofbnzl"&&(t.textContent=s),l=$(e),i=T(e,"P",{"data-svelte-h":!0}),L(i)!=="svelte-1onbfsz"&&(i.innerHTML=m),g=$(e),a=T(e,"H2",{"data-svelte-h":!0}),L(a)!=="svelte-1ncy5wr"&&(a.textContent=f),I=$(e),y=T(e,"P",{"data-svelte-h":!0}),L(y)!=="svelte-15igzoy"&&(y.textContent=O),x=$(e),C=T(e,"SELECT",{class:!0});var o=B(C);w=T(o,"OPTION",{"data-svelte-h":!0}),L(w)!=="svelte-o4qf5i"&&(w.textContent=A),o.forEach(r),_=$(e),E&&E.l(e),d=$(e),u=T(e,"BUTTON",{class:!0,"data-svelte-h":!0}),L(u)!=="svelte-g54wjn"&&(u.textContent=c),N=$(e),H=T(e,"H2",{"data-svelte-h":!0}),L(H)!=="svelte-15igkao"&&(H.textContent=S),U=$(e),z=T(e,"P",{"data-svelte-h":!0}),L(z)!=="svelte-4x8vmn"&&(z.textContent=it),G=$(e),q=T(e,"DIV",{class:!0});var p=B(q);j=T(p,"TABLE",{class:!0});var V=B(j);X=T(V,"THEAD",{"data-svelte-h":!0}),L(X)!=="svelte-1r2gly7"&&(X.innerHTML=ot),W=$(V),J=T(V,"TBODY",{});var ut=B(J);for(let tt=0;tt<h.length;tt+=1)h[tt].l(ut);ut.forEach(r),V.forEach(r),p.forEach(r),this.h()},h(){w.__value="custom",Y(w,w.__value),M(C,"class","select-bordered select my-2 w-full"),n[0]===void 0&&At(()=>n[6].call(C)),M(u,"class","btn-primary btn-block btn my-2"),M(j,"class","table table-auto"),M(q,"class","flex items-center")},m(e,o){v(e,t,o),v(e,l,o),v(e,i,o),v(e,g,o),v(e,a,o),v(e,I,o),v(e,y,o),v(e,x,o),v(e,C,o),k(C,w),ct(C,n[0],!0),v(e,_,o),E&&E.m(e,o),v(e,d,o),v(e,u,o),v(e,N,o),v(e,H,o),v(e,U,o),v(e,z,o),v(e,G,o),v(e,q,o),k(q,j),k(j,X),k(j,W),k(j,J);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(J,null);Q=!0,Z||(rt=[F(C,"change",n[6]),F(u,"click",n[9])],Z=!0)},p(e,[o]){if(o&1&&ct(C,e[0]),e[0]==="custom"?E?E.p(e,o):(E=_t(e),E.c(),E.m(d.parentNode,d)):E&&(E.d(1),E=null),o&24){K=ft(e[3]);let p;for(p=0;p<K.length;p+=1){const V=dt(e,K,p);h[p]?(h[p].p(V,o),P(h[p],1)):(h[p]=pt(V),h[p].c(),P(h[p],1),h[p].m(J,null))}for(lt(),p=K.length;p<h.length;p+=1)gt(p);st()}},i(e){if(!Q){for(let o=0;o<K.length;o+=1)P(h[o]);Q=!0}},o(e){h=h.filter(Boolean);for(let o=0;o<h.length;o+=1)R(h[o]);Q=!1},d(e){e&&(r(t),r(l),r(i),r(g),r(a),r(I),r(y),r(x),r(C),r(_),r(d),r(u),r(N),r(H),r(U),r(z),r(G),r(q)),E&&E.d(e),Et(h,e),Z=!1,vt(rt)}}}function zt(n,t,s){let l,i,{data:m}=t;const{open:g}=Dt("simple-modal");let a="",f="",I="",y="",O="";const x=async c=>{let N=await Bt.sign({transactionXDR:y,network:O,pincode:c});await Lt(N),Ot()},C=async(c=!0,N=void 0)=>{let{transaction:H,network_passphrase:S}=await jt({source:m.publicKey,asset:N??i,limit:c?void 0:"0"});y=H,O=S,g(Nt,{transactionXDR:y,transactionNetwork:O,onConfirm:x})};function w(){a=$t(this),s(0,a)}function A(){f=this.value,s(1,f)}function _(){I=this.value,s(2,I)}const d=()=>C(),u=c=>C(!1,c);return n.$$set=c=>{"data"in c&&s(5,m=c.data)},n.$$.update=()=>{n.$$.dirty&32&&s(3,l=m.balances??[]),n.$$.dirty&7&&(i=a!=="custom"?a:`${f}:${I}`)},[a,f,I,l,C,m,w,A,_,d,u]}class Zt extends xt{constructor(t){super(),Ht(this,t,zt,Ut,wt,{data:5})}}export{Zt as component};
